---
title: 内插字符串常量
date: 2023-04-17 21:01:20
permalink: /pages/49488e/
---

在 C# 10 中，你可以使用字符串插值来初始化常量字符串。如果所有占位符都是常量字符串，那么字符串插值可以创建更易读的常量字符串。占位符表达式不能是数值常量，因为这些常量在运行时会被转换为字符串，当前文化可能会影响它们的字符串表示。
## 常量插值

常量插值允许你在常量字符串中使用字符串插值，这在之前的 C# 版本中是不允许的。常量插值的语法和字符串插值的语法类似，但是占位符必须是常量字符串。

下面是一个示例：

```csharp

const string Name = "John";
const string Greeting = $"Hello, {Name}!";
Console.WriteLine(Greeting); // 输出：Hello, John!
```



在上面的示例中，我们定义了一个常量字符串 `Name` 和一个使用字符串插值初始化的常量字符串 `Greeting`，其中占位符 `Name` 是一个常量字符串。
## 数值常量

由于数值常量会在运行时被转换为字符串，因此不能在常量插值中使用它们作为占位符。但是，你可以使用一个常量表达式来代替数值常量。常量表达式是指在编译时可以计算出值的表达式。下面是一个示例：

```csharp

const int Age = 30;
const string Message = $"I am {(Age > 18 ? "an adult" : "a minor")}.";
Console.WriteLine(Message); // 输出：I am an adult.
```



在上面的示例中，我们使用一个常量表达式 `Age > 18` 作为条件表达式，以代替数值常量。如果 `Age` 大于 18，则占位符的值为 `"an adult"`，否则为 `"a minor"`。
## 总结

在 C# 10 中，你可以使用字符串插值来初始化常量字符串，但是占位符必须是常量字符串或常量表达式。这使得常量字符串更易于编写和阅读，特别是当你需要在应用程序中使用多个常量字符串时。
